
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>涂洋&amp;苏娜，咱们要结婚啦！</title>
        <meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <div id='wx_pic' style='margin:0 auto;display:none;'><img src='./images/wx_icon.png' /></div> 
        <link rel="stylesheet" href="./css/swiper.css" />
        <link rel="stylesheet" href="./css/index.css" />
        <link rel="stylesheet" href="./css/photoswipe.css" />
        <link rel="stylesheet" href="http://apps.bdimg.com/libs/fontawesome/4.2.0/css/font-awesome.min.css">
        <script src="./js/jquery.min.js"></script>
        <script src="./js/swiper.min.js"></script>
        <script src="./js/klass.min.js"></script>
        <script src="./js/photoswipe.min.js"></script>
    </head>
    <body>

        <label id="musicbox" class="music">
            <audio id="audio" autoplay="autoplay" loop="loop">
            <source src="./images/demo.mp3" type="audio/mpeg">
            </audio>
        </label>

        <a href="javascript:;" class="u-move" id="u-move"></a>
        <a href="javascript:;" class="u-status up" id="u-status"></a>
        <div class="silde-nav" id="silde-nav">
            <span id="nav_btn0"></span>
            <span id="nav_btn1"></span>
            <span id="nav_btn2"></span>
            <span id="nav_btn3"></span>
            <span id="nav_btn4"></span>
        </div>

        <section class="app swiper-container swiper-container-vertical" id="app">
        <section class="swiper-wrapper" style="transition-duration: 0ms; transform: translate3d(0px, 0px, 0px);">

        <section class="swiper-slide page page1 swiper-slide-active" style="height: 1137px;">
        <div class="edge">
            <div class="title">
                <b class="man">涂洋</b>
                <i class="and"></i>
                <b class="women">苏娜</b>
            </div>
            <p class="time">2016/5/1 11:00</p>
            <p class="address">正阳县陡沟镇供销社</p>
            <div class="u-line"></div>
            <div id="countTimeDown" class="u-times">倒计时<em>--</em>天<em>--</em>时<em>--</em>分<em>--</em>秒</div>
        </div>
        <div class="root"></div>
        </section>

        <section class="swiper-slide page page2 otherpage swiper-slide-next" id="page2" style="height: 1137px;">
        <div class="p-cnt">
            <div class="title">
                <h2>诚挚的邀请</h2>
                <h3>invitation</h3>     
            </div>
            <div class="topic">
                新郎涂洋与新娘苏娜诚挚的邀请您参加我们的婚礼，望您在百忙之中抽出空闲前来参加，我们用心准备了惊喜和礼物，真心期待您分享我们的甜蜜。</div>
            <div class="items" style="margin-top:100px;">
                <div class="mems">
                    <b class="man">涂洋</b>
                    <i class="and"></i>
                    <b class="women">苏娜</b>
                </div>
                <h4>新婚典礼</h4>
                <div class="u-lines"></div>
                <p class="time">
                <em>时间：</em>
                <span>2016/5/1 11:00</span>
                </p>
                <p class="address">
                <em>地点：</em>
                <span>正阳县陡沟镇供销社</span>
                </p>
            </div>
            <div class="root"></div>
        </div>
        </section>

        <section class="swiper-slide page page3 otherpage" id="page3" style="height: 1137px;">
        <div class="p-cnt">
            <div class="title">
                <h2>婚礼地址</h2>
                <h3>address</h3>        
            </div>
            <div class="topic">
                地址：正阳县陡沟镇十字街供销社
            </div>
            <div class="map"><a href="http://map.baidu.com/mobile/webapp/place/linesearch/foo=bar/from=place&end=word%3D%25E9%2599%25A1%25E6%25B2%259F%25E9%2595%2587%26point%3D12729360.09%252C3790813.63%26uid%3D251374c9fbf7253fa01de994&tab=line"></a></div>
            <ul class="ways" style="display: none;">
                <li>
                <h3>自驾：</h3>
                <p>武昌区临江大道96号(或直接搜索"武汉万达威斯汀酒店")</p>
                </li>
                <li>
                <h3>地铁：</h3>
                <p>地铁2号线积玉桥站A出口下车后至前进路左转到临江大道96号</p>
                </li>
                <li>
                <h3>公交车：</h3>
                <p>16路临江大道曾家巷站下车</p>
                </li>
            </ul>
            <div class="calls">
                <a href="tel:18903059288" class="call-man"></a>
                <a href="tel:18010165929" class="call-women"></a>
            </div>
            <div class="root" style="height:200px;"></div>
        </div>
        </section>

        <section class="swiper-slide page page5 otherpage" id="page5" style="height: 1137px;">
        <div class="p-cnt">
            <div class="title">
                <h2>婚礼流程</h2>
                <h3>process</h3>        
            </div>
            <ul>
                <li>
                <div class="con">
                    <p class="time">12:06</p>
                    <p class="thing">主持人致词</p>
                </div>
                </li><li>
                <div class="con">
                    <p class="time">12:10</p>
                    <p class="thing">新人出场</p>
                </div>
                </li><li>
                <div class="con">
                    <p class="time">12:20</p>
                    <p class="thing">拜天地</p>
                </div>
                </li><li>
                <div class="con">
                    <p class="time">12:25</p>
                    <p class="thing">父母致辞</p>
                </div>
                </li><li>
                <div class="con">
                    <p class="time">12:30</p>
                    <p class="thing">交杯酒</p>
                </div>
                </li>
                <li>
                <div class="con">
                    <p class="time">12:36</p>
                    <p class="thing">午宴开始</p>
                </div>
                </li>
            </ul>
            <img src="./images/vline.png" class="vline">
            <div class="root"></div>
        </div>
        </section>

        <section class="swiper-slide page page6 otherpage" id="page6" style="height: 1137px;">
        <div class="p-cnt">
            <div class="title">
                <h2>婚纱照</h2>
                <h3>photos</h3>     
            </div>

            <div class="swiper-container swiper-photo swiper-container-horizontal">
                <div class="swiper-wrapper">

                    <div class="swiper-slide swiper-slide-active" style="width: 640px; margin-right: 50px;">
                        <ul>
                            <li><a href="./images/demo_img_7.png"><img id="img_1" src="./images/demo_avatar_7.png"></a></li>
                            <li><a href="./images/demo_img_0.jpg"><img id="img_2" src="./images/demo_avatar_0.jpg"></a></li>
                            <li><a href="./images/demo_img_1.jpg"><img id="img_3" src="./images/demo_avatar_1.jpg"></a></li>
                            <li><a href="./images/demo_img_2.jpg"><img id="img_4" src="./images/demo_avatar_2.jpg"></a></li>
                        </ul>
                    </div>
                    <div class="swiper-slide swiper-slide-next" style="width: 640px; margin-right: 50px;">
                        <ul>
                            <li><a href="./images/demo_img_3.jpg"><img id="img_5" src="./images/demo_avatar_3.jpg"></a></li>
                            <li><a href="./images/demo_img_4.jpg"><img id="img_6" src="./images/demo_avatar_4.jpg"></a></li>
                            <li><a href="./images/demo_img_5.jpg"><img id="img_7" src="./images/demo_avatar_5.jpg"></a></li>
                            <li><a href="./images/demo_img_6.jpg"><img id="img_7" src="./images/demo_avatar_6.jpg"></a></li>
                        </ul>
                    </div>

                </div>
                <div class="swiper-pagination swiper-pagination-v swiper-pagination-clickable"><span class="swiper-pagination-bullet swiper-pagination-bullet-active"></span><span class="swiper-pagination-bullet"></span></div>
            </div>

            <div class="root"></div>
        </div>
        </section>

        <section class="swiper-slide page page4 otherpage" id="page4" style="height: 1137px;">
        <div class="p-cnt">
            <div class="title">
                <h2>祝福我们</h2>
                <h3>blessing</h3>       
            </div>
            <form action="" class="bless_form">
                <div>
                    <input class="ui-input" type="text" placeholder="您的真实姓名" name="realname" id="realname">   
                </div>
                <div>
                    <input maxlength="11" class="ui-input" type="tel" placeholder="您的手机号码" name="mobile" id="mobile">
                </div>
                <div>
                    <textarea class="ui-textarea" placeholder="输入您的祝福" name="comment" id="comment"></textarea>
                </div>
                <div id="jointype" class="join_btns">
                    <a class="yes" href="javascript:;" val="yes">出席</a>
                    <a class="wait" href="javascript:;" val="wait">待定</a>
                    <input id="join_input" name="jointype" type="hidden" value="" />
                </div>
                <div class="submit">
                    <a id="submit" href="javascript:;">提交</a>
                </div>
            </form>
            <div class="root"></div>
        </div>
        </section>
        
        </section>
        </section>

        <script>
            var pageSwiper = new Swiper('#app',{
                paginationClickable: true,
                direction: 'vertical',
                mousewheelControl: true
            });

            var swiperV = new Swiper('.swiper-photo', {
                pagination: '.swiper-pagination-v',
                paginationClickable: true,
                spaceBetween: 50
            });

            $('#u-move').on('click', function(e){
                e.preventDefault();
                pageSwiper.swipeNext();
            });

            $('#nav_btn0').click(function(){pageSwiper.slideTo(1, 1000, false);});
            $('#nav_btn1').click(function(){pageSwiper.slideTo(2, 1000, false);});
            $('#nav_btn2').click(function(){pageSwiper.slideTo(3, 1000, false);});
            $('#nav_btn3').click(function(){pageSwiper.slideTo(4, 1000, false);});
            $('#nav_btn4').click(function(){pageSwiper.slideTo(5, 1000, false);});
            $('#nav_btn5').click(function(){pageSwiper.slideTo(6, 1000, false);});

            $('#u-status').on('click',function(){
                if($(this).hasClass('up')){
                    $('#silde-nav').slideDown('fast',function(){
                        $('#silde-nav').find('span').eq(0).addClass('animate-a0');
                        $('#silde-nav').find('span').eq(1).addClass('animate-a1');
                        $('#silde-nav').find('span').eq(2).addClass('animate-a2');
                        $('#silde-nav').find('span').eq(3).addClass('animate-a3');
                        $('#silde-nav').find('span').eq(4).addClass('animate-a4');
                        $('#silde-nav').find('span').eq(5).addClass('animate-a5');
                        $('#u-status').removeClass('up');
                    });
                    
                } else {
                    $(this).addClass('up');
                    $('#silde-nav').fadeOut(function(){
                        $('#silde-nav').find('span').eq(0).removeClass('animate-a0');
                        $('#silde-nav').find('span').eq(1).removeClass('animate-a1');
                        $('#silde-nav').find('span').eq(2).removeClass('animate-a2');
                        $('#silde-nav').find('span').eq(3).removeClass('animate-a3');
                        $('#silde-nav').find('span').eq(4).removeClass('animate-a4');
                        $('#silde-nav').find('span').eq(5).removeClass('animate-a5');
                    });
                }
            });

            $('#musicbox').on('click', function(){
                if ($(this).hasClass('music')){
                    $(this).attr('class','music-off');
                    $(this).children('audio').get(0).pause();
                } else {
                    $(this).attr('class','music');
                    $(this).children('audio').get(0).play();
                }

            });

            function countTimeDown()
            {
                var destTime = new Date('2016/05/01 11:00');
                var nowTime = (new Date()).getTime();
                var remainTime = parseInt((destTime - nowTime)/1000);
                if (remainTime <= 0) {
                    $('#countTimeDown').html('<em>婚礼开始了。。。</em>');
                    return false;
                }
                var day = parseInt(remainTime/3600/24);
                var hour = parseInt(remainTime%(3600*24)/3600);
                var minute = parseInt(remainTime%3600/60);
                var sec  = parseInt(remainTime%60);
                $('#countTimeDown').html('倒计时<em>'+day+'</em>天<em>'+hour+'</em>时<em>'+minute+'</em>分<em>'+sec+'</em>秒');
                setTimeout(countTimeDown, 1000);     
            }

            $(document).ready(function(){

                countTimeDown();

                $(document).one('touchstart', function (e) {
                    var music = document.getElementById("audio");
                    if (music.paused) { 
                        music.play(); 
                    } 
                });

                $("#overlay_ul").bind("click", function(evt){
                    if("UL" == evt.target.nodeName){
                        this.className = 'overlay_ul';
                        $(this).find('li').removeClass('on');
                    }
                });

                $('#jointype a').on('click', function(){
                    $("#jointype a").each(function(){
                        $(this).removeClass("active");
                    });
                    $(this).addClass("active");
                    $('#join_input').val($(this).attr('val'));
                });

                $('#submit').on('click', function(){
                    var realname = $('#realname').val();
                    if (realname.length < 1) {
                        alert('请输入您的真实姓名哦！');
                        return false;
                    }

                    var mobile = $('#mobile').val();
                    if (mobile.length != 11) {
                        alert('请输入正确的手机号码哦！');
                        return false;
                    }

                    var comment = $('#comment').val(); 
                    if (comment.length < 1) {
                        alert('请输入您的祝福哦！');
                        return false;
                    }

                    var jointype = $('#join_input').val();
                    if (jointype.length < 1) {
                        alert('请您选择出席还是待定哦');
                        return false;
                    }

                    var data = {
                        realname: realname,
                        mobile: mobile,
                        jointype: jointype,
                        comment: comment
                    };

                    $.ajax({
                        type: 'POST',
                        url: 'join.php',
                        data: data,
                        dataType: 'json',
                        success: function(res) {
                                alert(res.msg);
                            },
                        error: function(xhr, status, e) {
                            if (e != '')
                                alert(e);
                            else
                                alert('提交失败，请重试哦！');
                        }
                    });

                    return false;
                });

            });

            (function(w){
             document.addEventListener('DOMContentLoaded', function(){
                 var PhotoSwipe = w.Code.PhotoSwipe;
                 var options = {loop:false},
                 instance = PhotoSwipe.attach(w.document.querySelectorAll('.swiper-slide li a'), options);
                 }, false);
             })(window);

         </script>
    </body>
</html>
